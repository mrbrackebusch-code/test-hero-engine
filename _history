{"entries":[{"timestamp":1764514848030,"editorVersion":"2.0.62","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":131,"diffs":[[1,"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <variables></variables>\n  <block type=\"pxt-on-start\" x=\"0\" y=\"0\"></block>\n</xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":11253,"diffs":[[1," "]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":288,"length1":31,"diffs":[[1,"    \"additionalFilePaths\": []\n"]]}]}]},{"timestamp":1764516840506,"editorVersion":"2.0.62","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":84,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"></block></xml>"]]}]}]},{"timestamp":1764516871289,"editorVersion":"2.0.62","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":288,"length1":44,"diffs":[[1,""]]}]},{"type":"added","filename":"test.ts","value":"// tests go here; this will not be compiled when this package is used as an extension.\n"}]}],"snapshots":[{"timestamp":1764514848029,"editorVersion":"2.0.62","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <variables></variables>\n  <block type=\"pxt-on-start\" x=\"0\" y=\"0\"></block>\n</xml>","main.ts":" ","README.md":" ","assets.json":"","pxt.json":"{\n    \"name\": \"test Hero Engine\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"device\": \"*\",\n        \"Hero Engine\": \"workspace:764bdda6-82b1-4de7-69e2-9cfd83474f58\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"assets.json\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}},{"timestamp":1764516840506,"editorVersion":"2.0.62","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"></block></xml>","main.ts":"\n/**\n * STUDENT main.ts – Hero logic + animation hooks\n *\n * This file is designed to be BLOCK-FRIENDLY:\n * - uses `any[]` for hero/enemy arrays\n * - uses `any` for sprites inside functions\n * - relies on global FAMILY / ELEM / ANIM / HERO_DATA coming from the extension\n *\n * You can safely switch between Blocks and JavaScript without type errors.\n */\n\n// ---------------------------------------------------------\n// Demo idle images – replace with your own art if you want\n// ---------------------------------------------------------\n\nlet DEMO_HERO1_IDLE: Image = null\nlet DEMO_HERO2_IDLE: Image = null\nlet DEMO_HERO3_IDLE: Image = null\nlet DEMO_HERO4_IDLE: Image = null\n\nDEMO_HERO1_IDLE = img`\n    . . . . . . f f f f . . . . . . \n    . . . . f f f 2 2 f f f . . . . \n    . . . f f f 2 2 2 2 f f f . . . \n    . . f f f e e e e e e f f f . . \n    . . f f e 2 2 2 2 2 2 e e f . . \n    . . f e 2 f f f f f f 2 e f . . \n    . . f f f f e e e e f f f f . . \n    . f f e f b f 4 4 f b f e f f . \n    . f e e 4 1 f d d f 1 4 e e f . \n    . . f e e d d d d d d e e f . . \n    . . . f e e 4 4 4 4 e e f . . . \n    . . e 4 f 2 2 2 2 2 2 f 4 e . . \n    . . 4 d f 2 2 2 2 2 2 f d 4 . . \n    . . 4 4 f 4 4 5 5 4 4 f 4 4 . . \n    . . . . . f f f f f f . . . . . \n    . . . . . f f . . f f . . . . . \n`\nDEMO_HERO2_IDLE = img`\n    . . . . . . c c c c . . . . . . \n    . . . . c c c 5 5 c c c . . . . \n    . . . c c c 5 5 5 5 c c c . . . \n    . . c c c e e e e e e c c c . . \n    . . c c e 5 5 5 5 5 5 e e c . . \n    . . c e 5 c c c c c c 5 e c . . \n    . . c c c c e e e e c c c c . . \n    . c c e c b c 4 4 c b c e c c . \n    . c e e 4 1 c d d c 1 4 e e c . \n    . . c e e d d d d d d e e c . . \n    . . . c e e 4 4 4 4 e e c . . . \n    . . e 4 c 5 5 5 5 5 5 c 4 e . . \n    . . 4 d c 5 5 5 5 5 5 c d 4 . . \n    . . 4 4 c 4 4 7 7 4 4 c 4 4 . . \n    . . . . . c c c c c c . . . . . \n    . . . . . c c . . c c . . . . . \n`\nDEMO_HERO3_IDLE = img`\n    . . . . . . 6 6 6 6 . . . . . . \n    . . . . 6 6 6 3 3 6 6 6 . . . . \n    . . . 6 6 6 3 3 3 3 6 6 6 . . . \n    . . 6 6 6 e e e e e e 6 6 6 . . \n    . . 6 6 e 3 3 3 3 3 3 e e 6 . . \n    . . 6 e 3 6 6 6 6 6 6 3 e 6 . . \n    . . 6 6 6 6 e e e e 6 6 6 6 . . \n    . 6 6 e 6 b 6 4 4 6 b 6 e 6 6 . \n    . 6 e e 4 1 6 d d 6 1 4 e e 6 . \n    . . 6 e e d d d d d d e e 6 . . \n    . . . 6 e e 4 4 4 4 e e 6 . . . \n    . . e 4 6 3 3 3 3 3 3 6 4 e . . \n    . . 4 d 6 3 3 3 3 3 3 6 d 4 . . \n    . . 4 4 6 4 4 9 9 4 4 6 4 4 . . \n    . . . . . 6 6 6 6 6 6 . . . . . \n    . . . . . 6 6 . . 6 6 . . . . . \n`\nDEMO_HERO4_IDLE = img`\n    . . . . . . 8 8 8 8 . . . . . . \n    . . . . 8 8 8 7 7 8 8 8 . . . . \n    . . . 8 8 8 7 7 7 7 8 8 8 . . . \n    . . 8 8 8 e e e e e e 8 8 8 . . \n    . . 8 8 e 7 7 7 7 7 7 e e 8 . . \n    . . 8 e 7 8 8 8 8 8 8 7 e 8 . . \n    . . 8 8 8 8 e e e e 8 8 8 8 . . \n    . 8 8 e 8 b 8 4 4 8 b 8 e 8 8 . \n    . 8 e e 4 1 8 d d 8 1 4 e e 8 . \n    . . 8 e e d d d d d d e e 8 . . \n    . . . 8 e e 4 4 4 4 e e 8 . . . \n    . . e 4 8 7 7 7 7 7 7 8 4 e . . \n    . . 4 d 8 7 7 7 7 7 7 8 d 4 . . \n    . . 4 4 8 4 4 9 9 4 4 8 4 4 . . \n    . . . . . 8 8 8 8 8 8 . . . . . \n    . . . . . 8 8 . . 8 8 . . . . . \n`\n\n// ---------------------------------------------------------\n// Animation hooks – called by the engine\n// ---------------------------------------------------------\n\nfunction animateHero1(hero: Sprite, animKey: string, timeMs: number, direction: string) {\n    hero.setImage(DEMO_HERO1_IDLE)\n}\n\nfunction animateHero2(hero: Sprite, animKey: string, timeMs: number, direction: string) {\n    hero.setImage(DEMO_HERO2_IDLE)\n}\n\nfunction animateHero3(hero: Sprite, animKey: string, timeMs: number, direction: string) {\n    hero.setImage(DEMO_HERO3_IDLE)\n}\n\nfunction animateHero4(hero: Sprite, animKey: string, timeMs: number, direction: string) {\n    hero.setImage(DEMO_HERO4_IDLE)\n}\n\n// ---------------------------------------------------------\n// Hero logic hooks – 4 heroes, called by engine\n// ---------------------------------------------------------\n\nfunction hero1Logic(\n    button: string,\n    heroIndex: number,\n    enemiesArr: any[],\n    heroesArr: any[]\n): number[] {\n    let me: any = heroesArr[heroIndex]\n    let targetIndex = -1\n\n    if (me && enemiesArr.length > 0) {\n        let best = 1e9\n        for (let i = 0; i < enemiesArr.length; i++) {\n            let e: any = enemiesArr[i]\n            if (!e || (e.flags & sprites.Flag.Destroyed)) continue\n            const d = distanceTo(me, e)\n            if (d < best) {\n                best = d\n                targetIndex = i\n            }\n        }\n    }\n\n    let anyHeroLow = false\n    for (let j = 0; j < heroesArr.length; j++) {\n        let h: any = heroesArr[j]\n        if (!h) continue\n        const hp = sprites.readDataNumber(h, HERO_DATA.HP) | 0\n        if (hp > 0 && hp < 50) {\n            anyHeroLow = true\n            break\n        }\n    }\n\n    if (button == \"A\") {\n        if (anyHeroLow) {\n            return [\n                FAMILY.HEAL,\n                25, 25, 25, 25,\n                ELEM.HEAL,\n                ANIM.ID.A\n            ]\n        } else {\n            return [\n                FAMILY.STRENGTH,\n                10, 10, 300, 200,\n                ELEM.NONE,\n                ANIM.ID.A\n            ]\n        }\n    }\n    if (button == \"B\") {\n        return [\n            FAMILY.AGILITY,\n            4, 30, 30, 30,\n            ELEM.NONE,\n            ANIM.ID.B\n        ]\n    }\n    if (button == \"A+B\") {\n        return [\n            FAMILY.INTELLECT,\n            100, 25, 25, 25,\n            ELEM.NONE,\n            ANIM.ID.AB\n        ]\n    }\n    return [\n        FAMILY.STRENGTH,\n        0, 25, 25, 25,\n        ELEM.NONE,\n        ANIM.ID.IDLE\n    ]\n}\n\nfunction hero2Logic(\n    button: string,\n    heroIndex: number,\n    enemiesArr: any[],\n    heroesArr: any[]\n): number[] {\n    let me2: any = heroesArr[heroIndex]\n    let targetIndex2 = -1\n\n    if (me2 && enemiesArr.length > 0) {\n        let best2 = 1e9\n        for (let k = 0; k < enemiesArr.length; k++) {\n            let f: any = enemiesArr[k]\n            if (!f || (f.flags & sprites.Flag.Destroyed)) continue\n            const g = distanceTo(me2, f)\n            if (g < best2) {\n                best2 = g\n                targetIndex2 = k\n            }\n        }\n    }\n\n    let anyHeroLow2 = false\n    for (let l = 0; l < heroesArr.length; l++) {\n        let m: any = heroesArr[l]\n        if (!m) continue\n        const hp2 = sprites.readDataNumber(m, HERO_DATA.HP) | 0\n        if (hp2 > 0 && hp2 < 50) {\n            anyHeroLow2 = true\n            break\n        }\n    }\n\n    if (button == \"A\") {\n        if (anyHeroLow2) {\n            return [\n                FAMILY.HEAL,\n                25, 25, 25, 25,\n                ELEM.HEAL,\n                ANIM.ID.A\n            ]\n        } else {\n            return [\n                FAMILY.STRENGTH,\n                10, 10, 50, 200,\n                ELEM.NONE,\n                ANIM.ID.A\n            ]\n        }\n    }\n    if (button == \"B\") {\n        return [\n            FAMILY.AGILITY,\n            4, 30, 30, 30,\n            ELEM.NONE,\n            ANIM.ID.B\n        ]\n    }\n    if (button == \"A+B\") {\n        return [\n            FAMILY.INTELLECT,\n            12, 25, 25, 25,\n            ELEM.NONE,\n            ANIM.ID.AB\n        ]\n    }\n    return [\n        FAMILY.STRENGTH,\n        0, 25, 25, 25,\n        ELEM.NONE,\n        ANIM.ID.IDLE\n    ]\n}\n\nfunction hero3Logic(\n    button: string,\n    heroIndex: number,\n    enemiesArr: any[],\n    heroesArr: any[]\n): number[] {\n    let me3: any = heroesArr[heroIndex]\n    let targetIndex3 = -1\n\n    if (me3 && enemiesArr.length > 0) {\n        let best3 = 1e9\n        for (let n = 0; n < enemiesArr.length; n++) {\n            let o: any = enemiesArr[n]\n            if (!o || (o.flags & sprites.Flag.Destroyed)) continue\n            const p = distanceTo(me3, o)\n            if (p < best3) {\n                best3 = p\n                targetIndex3 = n\n            }\n        }\n    }\n\n    let anyHeroLow3 = false\n    for (let q = 0; q < heroesArr.length; q++) {\n        let r: any = heroesArr[q]\n        if (!r) continue\n        const hp3 = sprites.readDataNumber(r, HERO_DATA.HP) | 0\n        if (hp3 > 0 && hp3 < 50) {\n            anyHeroLow3 = true\n            break\n        }\n    }\n\n    if (button == \"A\") {\n        if (anyHeroLow3) {\n            return [\n                FAMILY.HEAL,\n                25, 25, 25, 25,\n                ELEM.HEAL,\n                ANIM.ID.A\n            ]\n        } else {\n            return [\n                FAMILY.STRENGTH,\n                10, 10, 50, 200,\n                ELEM.NONE,\n                ANIM.ID.A\n            ]\n        }\n    }\n    if (button == \"B\") {\n        return [\n            FAMILY.AGILITY,\n            4, 30, 30, 30,\n            ELEM.NONE,\n            ANIM.ID.B\n        ]\n    }\n    if (button == \"A+B\") {\n        return [\n            FAMILY.INTELLECT,\n            12, 25, 25, 25,\n            ELEM.NONE,\n            ANIM.ID.AB\n        ]\n    }\n    return [\n        FAMILY.STRENGTH,\n        0, 25, 25, 25,\n        ELEM.NONE,\n        ANIM.ID.IDLE\n    ]\n}\n\nfunction hero4Logic(\n    button: string,\n    heroIndex: number,\n    enemiesArr: any[],\n    heroesArr: any[]\n): number[] {\n    let me4: any = heroesArr[heroIndex]\n    let targetIndex4 = -1\n\n    if (me4 && enemiesArr.length > 0) {\n        let best4 = 1e9\n        for (let s = 0; s < enemiesArr.length; s++) {\n            let t: any = enemiesArr[s]\n            if (!t || (t.flags & sprites.Flag.Destroyed)) continue\n            const u = distanceTo(me4, t)\n            if (u < best4) {\n                best4 = u\n                targetIndex4 = s\n            }\n        }\n    }\n\n    let anyHeroLow4 = false\n    for (let v = 0; v < heroesArr.length; v++) {\n        let w: any = heroesArr[v]\n        if (!w) continue\n        const hp4 = sprites.readDataNumber(w, HERO_DATA.HP) | 0\n        if (hp4 > 0 && hp4 < 50) {\n            anyHeroLow4 = true\n            break\n        }\n    }\n\n    if (button == \"A\") {\n        if (anyHeroLow4) {\n            return [\n                FAMILY.HEAL,\n                25, 25, 25, 25,\n                ELEM.HEAL,\n                ANIM.ID.A\n            ]\n        } else {\n            return [\n                FAMILY.STRENGTH,\n                10, 10, 50, 200,\n                ELEM.NONE,\n                ANIM.ID.A\n            ]\n        }\n    }\n    if (button == \"B\") {\n        return [\n            FAMILY.AGILITY,\n            4, 30, 30, 30,\n            ELEM.NONE,\n            ANIM.ID.B\n        ]\n    }\n    if (button == \"A+B\") {\n        return [\n            FAMILY.INTELLECT,\n            12, 25, 25, 25,\n            ELEM.NONE,\n            ANIM.ID.AB\n        ]\n    }\n    return [\n        FAMILY.STRENGTH,\n        0, 25, 25, 25,\n        ELEM.NONE,\n        ANIM.ID.IDLE\n    ]\n}\n\n// ---------------------------------------------------------\n// HOOKS + START ENGINE\n// ---------------------------------------------------------\n\nHeroEngine.hero1LogicHook = hero1Logic\nHeroEngine.hero2LogicHook = hero2Logic\nHeroEngine.hero3LogicHook = hero3Logic\nHeroEngine.hero4LogicHook = hero4Logic\n\nHeroEngine.animateHero1Hook = animateHero1\nHeroEngine.animateHero2Hook = animateHero2\nHeroEngine.animateHero3Hook = animateHero3\nHeroEngine.animateHero4Hook = animateHero4\n\nHeroEngine.start()\n","README.md":" ","assets.json":"","pxt.json":"{\n    \"name\": \"test Hero Engine\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"device\": \"*\",\n        \"Hero Engine\": \"workspace:764bdda6-82b1-4de7-69e2-9cfd83474f58\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"assets.json\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}}],"shares":[],"lastSaveTime":1764516871293}